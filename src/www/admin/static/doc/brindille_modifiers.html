<!DOCTYPE html>
	<html>
	<head>
		<title>Référence des filtres Brindille</title>
		<meta charset="utf-8" />
		<style type="text/css">
		body, form, p, div, hr, fieldset, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6 {
			margin: 0;
			padding: 0;
		}
		body {
			font-family: "Trebuchet MS", Arial, Helvetica, Sans-serif;
			padding: .8em;
			background: #eee;
		}
		.web-content .nav ul {
			list-style-type: none;
			margin: -.8em;
			margin-bottom: 1em;
			padding: 1em;
			background: #ddd;
			border-bottom: 1px solid #999;
			text-align: center;
		}
		.web-content .boutons ul {
			list-style-type: none;
			background: #ccc;
			padding: .5em;
			margin: 0;
		}
		.web-content .nav li, .web-content .boutons li {
			display: inline-block;
			margin: 0 1em;
		}
		.web-content .nav a, .web-content .boutons a {
			display: inline-block;
			background: #fff;
			color: darkblue;
			border-radius: .2em;
			padding: .3em .5em;
			font-size: 1.2em;
		}
		.web-content .nav strong a {
			color: darkred;
			box-shadow: 0px 0px 5px orange;
		}
		</style>
		<link rel="stylesheet" type="text/css" href="../../../content.css" />
	</head>
	<body><div class="web-content"><p>indille</p>
<div class="nav">
<ul>
<li><a href="brindille.html">Documentation Brindille</a></li>
<li><a href="brindille_functions.html">Fonctions</a></li>
<li><a href="brindille_sections.html">Sections</a></li>
<li><strong><a href="brindille_modifiers.html">Filtres</a></strong></li>
</ul>
</div><aside class="toc">
	<ol>
		<li><a href="#filtres-php">Filtres PHP</a></li>
		<li><a href="#filtres-de-texte">Filtres de texte</a>
		<ol>
			<li><a href="#truncate">truncate</a></li>
			<li><a href="#excerpt">excerpt</a></li>
			<li><a href="#protect_contact">protect_contact</a></li>
			<li><a href="#escape">escape</a></li>
			<li><a href="#xml_escape">xml_escape</a></li>
			<li><a href="#raw">raw</a></li>
			<li><a href="#args">args</a></li>
			<li><a href="#count">count</a></li>
			<li><a href="#cat">cat</a></li>
			<li><a href="#math">math</a></li>
			<li><a href="#replace">replace</a></li>
			<li><a href="#regexp_replace">regexp_replace</a></li>
			<li><a href="#size_in_bytes">size_in_bytes</a></li>
			<li><a href="#typo">typo</a></li>
			<li><a href="#money">money</a></li>
			<li><a href="#money_currency">money_currency</a></li>
			<li><a href="#remove_leading_number">remove_leading_number</a></li>
			<li><a href="#extract_leading_number">extract_leading_number</a></li>
			<li><a href="#check_email">check_email</a></li>
			<li><a href="#filtres-de-date">Filtres de date</a></li>
			<li><a href="#filtres-de-condition">Filtres de condition</a>
</li></ol></li></ol></aside><h1 id="filtres-php">Filtres PHP</h1>
<p>Ces filtres viennent directement de PHP et utilisent donc les mêmes paramètres :</p>
<ul>
<li>strtolower</li>
<li>strtoupper</li>
<li>ucfirst</li>
<li>ucwords</li>
<li>htmlentities</li>
<li>htmlspecialchars</li>
<li>trim, ltrim, rtrim</li>
<li>lcfirst</li>
<li>md5</li>
<li>sha1</li>
<li>metaphone</li>
<li>soundex</li>
<li>str_split</li>
<li>str_word_count</li>
<li>strrev</li>
<li>strlen</li>
<li>strip_tags</li>
<li>nl2br</li>
<li>wordwrap</li>
<li>strlen</li>
<li>abs</li>
</ul>
<h1 id="filtres-de-texte">Filtres de texte</h1>
<h2 id="truncate">truncate</h2>
<p>Arguments :</p>
<ul>
<li>nombre : longueur en nombre de caractères (défaut = 80)</li>
<li>texte : texte à placer à la fin (si tronqué) (défaut = …)</li>
<li>booléen : coupure stricte, si <code>true</code> alors un mot pourra être coupé en deux, sinon le texte sera coupé au dernier mot complet</li>
</ul>
<p>Tronque un texte à une longueur définie.</p>
<h2 id="excerpt">excerpt</h2>
<p>Produit un extrait d'un texte.</p>
<p>Supprime les tags HTML, tronque au nombre de caractères indiqué en second argument (si rien n'est indiqué, alors 600 est utilisé), et englobe dans un paragraphe <code>&lt;p&gt;...&lt;/p&gt;</code>.</p>
<p>Équivalent de :</p>
<pre><code>&lt;p&gt;{{$html|strip_tags|truncate:600|nl2br}}&lt;/p&gt;</code></pre>
<h2 id="protect_contact">protect_contact</h2>
<p>Crée un lien protégé pour une adresse email, pour éviter que l'adresse ne soit recueillie par les robots spammeurs (empêche également le copier-coller et le lien ne fonctionnera pas avec javascript désactivé).</p>
<h2 id="escape">escape</h2>
<p>Échappe le contenu pour un usage dans un document HTML. Ce filtre est appliqué par défaut à tout ce qui est affiché (variables, etc.) sauf à utiliser le filtre <code>raw</code> (voir plus bas).</p>
<h2 id="xml_escape">xml_escape</h2>
<p>Échappe le contenu pour un usage dans un document XML.</p>
<h2 id="raw">raw</h2>
<p>Passer ce filtre désactive la protection automatique contre le HTML (échappement) dans le texte. À utiliser en connaissance de cause avec les contenus qui contiennent du HTML et sont déjà filtrés !</p>
<pre><code>{{"&lt;b&gt;Test"}} = &amp;lt;b&amp;gt;Test
{{"&lt;b&gt;Test"|raw}} = &lt;b&gt;Test</code></pre>
<h2 id="args">args</h2>
<p>Remplace des arguments dans le texte selon le schéma utilisé par <a href="https://www.php.net/sprintf" target="_blank" rel="nofollow,noreferrer">sprintf</a>.</p>
<pre><code>{{"Il y a %d résultats dans la recherche sur le terme '%s'."|args:$results_count:$query}}
= Il y a 5 résultat dans la recherche sur le terme 'test'.</code></pre>
<h2 id="count">count</h2>
<p>Compte le nombre d'entrées dans un tableau.</p>
<pre><code>{{$products|count}}
= 5</code></pre>
<h2 id="cat">cat</h2>
<p>Concaténer un texte avec un autre.</p>
<pre><code>{{"Tangerine"|cat:" Dream"}}
= Tangerine Dream</code></pre>
<h2 id="math">math</h2>
<p>Réalise un calcul mathématique. Cette fonction accepte :</p>
<ul>
<li>les nombres: <code>42</code>, <code>13,37</code>, <code>14.05</code></li>
<li>les signes : <code>+ - / *</code> pour additionner, diminuer, diviser ou multiplier</li>
<li>les parenthèses : <code>( )</code></li>
<li>les fonctions : <code>round(0.5452, 2)</code> <code>ceil(29,09)</code> <code>floor(0.99)</code> mais aussi : min, max, cos, sin, tan, asin, acos, atan, sinh, cosh, tanh, exp, sqrt, abs, log, log10, et pi.</li>
</ul>
<p>Le résultat est renvoyé sous la forme d'un entier, ou d'un nombre flottant dont les décimales sont séparées par un point.</p>
<pre><code>{{"1+1"|math}}
= 2</code></pre>
<p>Il est possible de donner d'autres arguments, de la même manière qu'avec <code>args</code> pour y inclure des données provenant de variables :</p>
<pre><code>{{:assign age=42}}
{{"1+%d"|math:$age}}
= 43
{{:assign prix=39.99 tva=19.1}}
{{"round(%f*%f, 2)"|math:$prix:$tva}}
= 47.63</code></pre>
<p>Il est aussi possible d'utiliser </p>
<h2 id="replace">replace</h2>
<p>Remplace des parties du texte par une autre partie.</p>
<pre><code>{{"Tata yoyo"|replace:"yoyo":"yaya"}}
= Tata yaya</code></pre>
<h2 id="regexp_replace">regexp_replace</h2>
<p>Remplace des valeurs en utilisant une expression rationnelles (regexp) (<a href="https://www.php.net/manual/fr/regexp.introduction.php" target="_blank" rel="nofollow,noreferrer">documentation PHP</a>).</p>
<pre><code>{{"Tartagueule"|regexp_replace:"/ta/i":"tou"}}
= tourtougueule</code></pre>
<h2 id="size_in_bytes">size_in_bytes</h2>
<p>Renvoie une taille en octets, Ko, Mo, ou Go à partir d'une taille en octets.</p>
<pre><code>{{100|size_in_bytes}} = 100 o
{{1500|size_in_bytes}} = 1,50 Ko
{{1048576|size_in_bytes}} = 1 Mo</code></pre>
<h2 id="typo">typo</h2>
<p>Pour le français.</p>
<p>Ajoute des espaces insécables (<code>&amp;nbsp;</code>) devant ou derrière les ponctuations françaises (<code>« » ? ! :</code>).</p>
<h2 id="money">money</h2>
<p>Formatte une valeur de monnaie (exprimée avec les cents inclus : <code>1502</code> = 15,02) pour l'affichage :</p>
<pre><code>{{$amount|money}}
15,02</code></pre>
<h2 id="money_currency">money_currency</h2>
<p>Formatte une valeur de monnaie en ajoutant la devise :</p>
<pre><code>{{$amount|money_currency}}
15,02 €</code></pre>
<h2 id="remove_leading_number">remove_leading_number</h2>
<p>Supprime le numéro au début d'un titre.</p>
<p>Cela permet de définir un ordre spécifique aux pages et catégories dans les listes.</p>
<pre><code>{{"03. Beau titre"|remove_leading_number}}
Beau titre</code></pre>
<h2 id="extract_leading_number">extract_leading_number</h2>
<p>Extrait le numéro du titre.</p>
<h2 id="check_email">check_email</h2>
<p>Permet de vérifier la validité d'une adresse email. Cette fonction vérifie la syntaxe de l'adresse mais aussi que le nom de domaine indiqué possède bien un enregistrement de type MX.</p>
<p>Renvoie <code>true</code> si l'adresse est valide.</p>
<pre><code>{{if !$_POST.email|check_email}}
&lt;p class="alert"&gt;L'adresse e-mail indiquée est invalide.&lt;/p&gt;
{{/if}}</code></pre>
<h2 id="filtres-de-date">Filtres de date</h2>
<ul>
<li><code>date</code> : formatte une date selon un format spécifié (identique au <a href="https://www.php.net/manual/fr/datetime.format.php" target="_blank" rel="nofollow,noreferrer">format utilisé par PHP</a>). Si aucun format n'est utilisé, le défaut sera <code>d/m/Y à H:i</code>. (en français)</li>
<li><code>strftime</code> : formatte une date selon un format spécifié, identique <a href="https://www.php.net/strftime" target="_blank" rel="nofollow,noreferrer">au format utilisé par la fonction strftime de PHP</a>. Un format doit obligatoirement être spécifié. En passant un code de langue en second paramètre, cette langue sera utilisée. Sont supportés le français (<code>fr</code>) et l'anglais (<code>en</code>). Le défaut est le français si aucune valeur n'est passée en second paramètre .</li>
<li><code>relative_date</code> : renvoie une date relative à la date du jour : <code>aujourd'hui</code>, <code>hier</code>, <code>demain</code>, ou sinon <code>mardi 2 janvier</code> (si la date est de l'année en cours) ou <code>2 janvier 2021</code> (si la date est d'une autre année). En spécifiant <code>true</code> en second paramètre, l'heure sera ajoutée au format <code>14h34</code>.</li>
<li><code>date_short</code> : date au format court : <code>d/m/Y</code>, en spécifiant <code>true</code> en second paramètre l'heure sera ajoutée : <code>à H\hi</code>.</li>
<li><code>date_long</code> : date au format long : <code>lundi 2 janvier 2021</code>. En spécifiant <code>true</code> en second paramètre l'heure sera ajoutée : <code>à 20h42</code>.</li>
<li><code>date_hour</code> : renvoie l'heure uniquement à partir d'une date : <code>20h00</code>. En passant <code>true</code> en second paramètre, les minutes seront omises si elles sont égales à zéro : <code>20h</code>.</li>
<li><code>atom_date</code> : formatte une date au format ATOM : <code>Y-m-d\TH:i:sP</code></li>
</ul>
<h2 id="filtres-de-condition">Filtres de condition</h2>
<p>Ces filtres renvoient <code>1</code> si la condition est remplie, ou <code>0</code> sinon. Ils peuvent être utilisés dans les conditions :</p>
<pre><code>{{if $page.path|match:"/aide"}}Bienvenue dans l'aide !{{/if}}</code></pre>
<ul>
<li><code>match</code> renvoie <code>1</code> si le texte indiqué est trouvé (insensible à la casse)</li>
<li><code>regexp_match</code>, idem mais avec une expression régulière (de type <code>/Bonjour|revoir/i</code>)</li>
</ul></div></body></html>